# Welcome to Slutskyâ€™s lab FEPSP analysis package!
This MATLABÂ© based package give you tools to mark points on the evoked field potential response, use them to extract the important response parameters (amplitude & slope), and plot the results of your I/O or STP experiment.
## Installation
Simply clone the repository to your desired location or download as zip file and extract wherever you want. After that, add the package folders to your MATLABÂ© path.
## Dependencies
When Finished
For now:
* ImportWCP
* RemoveDC
* rmDC
## Requirements
* Hardware: This package can run on any computer capable of running MATLAB 2019a.
* Software: This package requires MATLABÂ© 2019a or above, with toolboxes:
Image Processing Toolboxâ„¢, Signal Processing Toolboxâ„¢, Statistics and Machine Learning Toolboxâ„¢
## Usage
The package contains all the functions needed to load, pre-process, process & visualize your data. Each of them accepts low level data, enabling you to switch any of them with your own functions - as long as they produce the same data shape & type.<br>
ðŸŸ¨ðŸŸ©ðŸŸ¦ We encourage you to use MATLAB's Tab Autocompletion! Each function parameters should appear when you do so.ðŸŸ¨ðŸŸ©ðŸŸ¦<br>
### Graphical Process Explanation:
![Load -> [data_in,fs,protocol_id,stim_locs] -> fepsp_org2traces -> [traces] -> fepsp_markings -> [Saved in file: markings, traces (edited)] -> fepsp_analyse ->[results] -> fepsp_show](https://user-images.githubusercontent.com/58705788/136899691-8dea76cf-8b43-4d59-bd65-beaac869d46c.png)<br>
### Textual Process Explanation:
***Load*** - Load the data from Open Ephys or WinWCP.<br>
***fepsp_org2traces*** - Take a raw channel data, extract only the stimulus protocol repetitions, and organize everything in a way the package expect.<br>
***fepsp_markings*** - Open a GUI to ask user to mark start & peak of each response, for later analysis. Usually marking trough & peak is expected in electrophysiological recordings. Marking example:<br>
![fepsp_marking example](https://user-images.githubusercontent.com/58705788/136905236-0ca150f8-eeca-4a9f-bbab-4f13ddc35646.png)<br>
***fepsp_analyse*** - Calculate slope & amplitude for each marked response.<br>
***fepsp_show*** - Show summary of the fepsp data - including average traces, I/O graph (for single stimulus protocol) & facilitation graph (for multi stimulus protocol).Graphs examples:<br>
![fepsp_show examples](https://user-images.githubusercontent.com/58705788/136914149-14b1ff51-e1b0-4611-bc46-d55e89074e1b.png)<br>
And helper functions: <br>
* fepsp_plot_markings â€“ show the marked points & the slope measured area for each trace.
* get_protocol â€“ load existing saved protocol by ID. <br>
ðŸŸ¨ðŸŸ©ðŸŸ¦ We also included a running example script with some real experiment data. Simply open and run `fepsp_example.m`! ðŸŸ¨ðŸŸ©ðŸŸ¦<br>
## Functions Required Inputs & Outputs
We will describe here shortly each function most basic necessary inputs. There are more optional inputs that can be used, see each function docstring for full list. <br>
### Variables' organization
You can see how each data is organization in the docstring of each function. Most of the package variables are organized in a common way, or at least similar to it:<br>
***Standard Cell***<br>
2d cell array of channel (row) x intensity (column), with each cell containing a 2d numeric mat of stimulus number (row) x repetition (trace, column).
### Load & Pre-Processing
#### Load
TBD
#### fepsp_org2traces
ðŸ”´*Required Inputs:* <br>
* data_in - All the uncut data from all the channels.
* fs â€“ The sampling frequency used, in Hz.
* protocol_id â€“ ID of stimulation protocol used, for example "io","stp" or "custom" (for manually writing in a new protocol).
* stim_locs â€“ Sample numbers of the first stimulation in each stimulation protocol given.<br>


ðŸŸ¢*Outputs:* <br>
* traces â€“ All the repetitions of the stimulation protocol, organize in a way the package functions can digest.<br>


### Processing & Visualize
All the functions in this part need the inputs: <br>
* fs â€“ The sampling frequency used, in Hz.
* protocol_id â€“ ID of stimulation protocol used, for example "io","stp" or "custom" (for manually writing in a new protocol).
* traces â€“ As generated by fepsp_org2traces, see above.
#### fepsp_markings
ðŸ”´*Required Inputs:* <br>
* Shared inputs written above.<br>


ðŸŸ¢*Outputs: (saved in a file after GUI was closed)* <br>
* markings - a struct that holds all the sample numbers of each marked start & peak.
* traces - the same as the input, but with what changes user did while inspecting the traces - inverting and removing traces as needed.<br>
In any following function use those "traces" instead of the one from fepsp_org2traces to keep changes you did through the analysis.
#### fepsp_analyse
ðŸ”´*Required Inputs:* <br>
* Shared inputs written above.<br>
* markings - generated by fepsp_markings, see above.<br>


ðŸŸ¢*Outputs:* <br>
* results - a struct that holds all the analysis results & info.
#### fepsp_show
ðŸ”´*Required Inputs:* <br>
* Shared inputs written above.<br>
* markings - generated by fepsp_markings, see above.<br>
* results - generated by fepsp_analyse, see above. <br>
## Credits & How to Cite
APA 7, preprint?
* Haim, Leore - LH - https://github.com/leoreh (Note this include also all of your rep, such as slutsky code)
* Shub, Shira
* de Marcas, Lior - LdM - https://github.com/Liordemarcas
## License
***I lean toward the GNU GPLv3. However, I never dealt with licenses, feel free to choose other one***
MIT license? (https://choosealicense.com/licenses/mit/) - Can do anything with our code <br>
GNU GPLv3? (https://choosealicense.com/licenses/gpl-3.0/) - Cannot use our code to create closed source program, meaning can't be published while hiding improvements
